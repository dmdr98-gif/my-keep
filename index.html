<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Sync Keep</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 15px; background: #f8f9fa; }
        textarea { width: 100%; height: 80vh; padding: 15px; border: 1px solid #ccc; border-radius: 12px; font-size: 16px; box-sizing: border-box; line-height: 1.5; }
        .status { font-size: 12px; color: #666; margin-top: 10px; text-align: right; }
    </style>
</head>
<body>
    <textarea id="memo" placeholder="연결 중..."></textarea>
    <div id="status" class="status">상태: 준비 중</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        // [여기에 본인의 Firebase 설정값을 붙여넣으세요]
        const firebaseConfig = {
            apiKey: "AIzaSyALjheVaMZdCYxshJM6G0g4zXwdNBRZMEQ",
            authDomain: "database-4fc4f.firebaseapp.com",
            databaseURL: "https://database-4fc4f-default-rtdb.firebaseio.com",
            projectId: "database-4fc4f",
            storageBucket: "database-4fc4f.firebasestorage.app",
            messagingSenderId: "49818799571",
            appId: "1:49818799571:web:b70c9d98e87016c2a4f326"apiKey: "AIza...",
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const memoRef = ref(db, 'shared_memo');
        const memoArea = document.getElementById('memo');
        const status = document.getElementById('status');

        onValue(memoRef, (snapshot) => {
            if (document.activeElement !== memoArea) {
                memoArea.value = snapshot.val() || "";
            }
            status.innerText = "상태: 실시간 동기화 중";
        });

        memoArea.addEventListener('input', (e) => {
            set(memoRef, e.target.value);
            status.innerText = "저장 중...";
        });
    </script>
</body>
</html>
